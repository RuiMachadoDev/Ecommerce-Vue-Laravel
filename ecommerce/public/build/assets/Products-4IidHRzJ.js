import{p as x,q as P,x as C,c as s,a as r,F as k,m as w,i as g,t as i,k as _,s as h,y as D,d as m,o as d}from"./app-CZK27vvu.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={setup(){const y=x({data:[]}),t=x([]),l=x(!1),e=P({id:null,name:"",description:"",price:0,stock:0,category_id:null}),c=x(""),u=async(a="/products")=>{try{const n=await m.get(a);console.log("Resposta da API:",n.data),y.value=n.data}catch(n){console.error("Erro ao carregar produtos:",n),n.response&&console.error("Resposta do servidor:",n.response.data),y.value={data:[]}}},p=async()=>{try{const a=await m.get("/api/categories");t.value=a.data}catch(a){console.error("Erro ao carregar categorias:",a)}},b=()=>{l.value=!0,e.id=null,e.name="",e.description="",e.price=0,e.stock=0,e.category_id=null},v=a=>{l.value=!0,e.id=a.id,e.name=a.name,e.description=a.description,e.price=a.price,e.stock=a.stock,e.category_id=a.category_id},f=async()=>{try{e.id?await m.put(`/api/products/${e.id}`,e):await m.post("/api/products",e),l.value=!1,u(),c.value="Produto salvo com sucesso!"}catch(a){console.error(a),c.value="Erro ao salvar o produto. Tente novamente."}},o=async a=>{try{await m.delete(`/api/products/${a}`),u(),c.value="Produto excluído com sucesso!"}catch(n){console.error(n),c.value="Erro ao excluir o produto. Tente novamente."}};return C(()=>{u(),p()}),{products:y,categories:t,formVisible:l,formData:e,message:c,fetchProducts:u,showCreateForm:b,editProduct:v,saveProduct:f,deleteProduct:o}}},F={class:"max-w-4xl mx-auto bg-white shadow-md rounded-lg p-6 mt-8 text-gray-800"},N={key:0,class:"space-y-4"},A={class:"text-lg font-medium"},S={class:"text-gray-600"},U={class:"text-gray-600"},q={class:"text-gray-600"},B={class:"space-x-2"},M=["onClick"],T=["onClick"],j={key:1,class:"text-center text-gray-600"},R={key:2,class:"text-center text-gray-600"},G={key:3,class:"mt-6 flex justify-center items-center space-x-4"},I={key:4,class:"mt-6 bg-gray-50 p-4 rounded-lg shadow"},L={class:"text-xl font-semibold mb-4"},z={class:"mb-4"},H={class:"mb-4"},J={class:"mb-4"},K={class:"mb-4"},O=["value"],Q={key:5,class:"mt-4 p-4 bg-green-100 text-green-800 rounded"};function W(y,t,l,e,c,u){var p,b,v,f;return d(),s("div",F,[t[9]||(t[9]=r("h1",{class:"text-2xl font-bold mb-6 text-center"},"Gestão de Produtos",-1)),r("button",{onClick:t[0]||(t[0]=(...o)=>e.showCreateForm&&e.showCreateForm(...o)),class:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition mb-4"}," Adicionar Novo Produto "),((b=(p=e.products)==null?void 0:p.data)==null?void 0:b.length)>0?(d(),s("ul",N,[(d(!0),s(k,null,w(e.products.data,o=>{var a;return d(),s("li",{key:o.id,class:"flex justify-between items-center bg-gray-100 p-4 rounded-lg shadow-sm"},[r("div",null,[r("h3",A,i(o.name),1),r("p",S,"Preço: "+i(o.price)+" €",1),r("p",U,"Estoque: "+i(o.stock),1),r("p",q,"Categoria: "+i((a=o.category)==null?void 0:a.name),1)]),r("div",B,[r("button",{onClick:n=>e.editProduct(o),class:"bg-gray-800 text-white px-3 py-1 rounded-md hover:bg-gray-700 transition"}," Editar ",8,M),r("button",{onClick:n=>e.deleteProduct(o.id),class:"bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-500 transition"}," Excluir ",8,T)])])}),128))])):e.products?(d(),s("p",j,"Nenhum produto encontrado.")):(d(),s("p",R,"Carregando produtos...")),((f=(v=e.products)==null?void 0:v.data)==null?void 0:f.length)>0?(d(),s("div",G,[e.products.prev_page_url?(d(),s("button",{key:0,onClick:t[1]||(t[1]=o=>e.fetchProducts(e.products.prev_page_url)),class:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700"}," Anterior ")):g("",!0),e.products.next_page_url?(d(),s("button",{key:1,onClick:t[2]||(t[2]=o=>e.fetchProducts(e.products.next_page_url)),class:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700"}," Próximo ")):g("",!0)])):g("",!0),e.formVisible?(d(),s("div",I,[r("h2",L,i(e.formData.id?"Editar Produto":"Adicionar Produto"),1),r("div",z,[_(r("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.name=o),type:"text",placeholder:"Nome do Produto",class:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md focus:ring focus:ring-gray-500"},null,512),[[h,e.formData.name]])]),r("div",H,[_(r("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>e.formData.price=o),type:"number",placeholder:"Preço",class:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md focus:ring focus:ring-gray-500"},null,512),[[h,e.formData.price]])]),r("div",J,[_(r("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.stock=o),type:"number",placeholder:"Estoque",class:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md focus:ring focus:ring-gray-500"},null,512),[[h,e.formData.stock]])]),r("div",K,[_(r("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.category_id=o),class:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md focus:ring focus:ring-gray-500"},[t[8]||(t[8]=r("option",{value:"",disabled:""},"Selecione uma Categoria",-1)),(d(!0),s(k,null,w(e.categories,o=>(d(),s("option",{key:o.id,value:o.id},i(o.name),9,O))),128))],512),[[D,e.formData.category_id]])]),r("button",{onClick:t[7]||(t[7]=(...o)=>e.saveProduct&&e.saveProduct(...o)),class:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition"}," Salvar ")])):g("",!0),e.message?(d(),s("div",Q,i(e.message),1)):g("",!0)])}const Z=E(V,[["render",W]]);export{Z as default};
